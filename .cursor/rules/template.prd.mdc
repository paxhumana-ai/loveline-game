---
alwaysApply: true
---

# ëŸ¬ë¸Œë¼ì¸ ê²Œì„ í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ (PRD)

## 1. í”„ë¡œì íŠ¸ ê°œìš”

- **í”„ë¡œì íŠ¸ ëª…**: ëŸ¬ë¸Œë¼ì¸ ê²Œì„ (LoveLine Game)
- **ëª©í‘œ**: ì˜¤í”„ë¼ì¸ ë¯¸íŒ…, ë™ì•„ë¦¬ MT, ëª¨ì„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í•˜íŠ¸ì‹œê·¸ë„ ìŠ¤íƒ€ì¼ì˜ ì‹¤ì‹œê°„ ë§¤ì¹­ ê²Œì„ì„ ì œê³µí•©ë‹ˆë‹¤. ì°¸ê°€ìë“¤ì€ ìµëª…ìœ¼ë¡œ ì„œë¡œë¥¼ ì§€ëª©í•˜ë©°, ìƒí˜¸ ë§¤ì¹­ ì‹œ ì‹¤ì œ ì˜¤í”„ë¼ì¸ì—ì„œ í•¨ê»˜ í™œë™í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì–»ìŠµë‹ˆë‹¤.
- **í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ**: Next.js, TypeScript, Supabase, Drizzle ORM, Shadcn/ui, TailwindCSS

## 2. í•µì‹¬ ê¸°ëŠ¥ (Features)

- **ê²Œì„ë°© ê´€ë¦¬**:
  - ë°© ìƒì„± ì‹œ ë‚¨ë…€ ì°¸ê°€ì ìˆ˜ ì„¤ì • (ê°ê° 2-8ëª…)
  - ë°© ì½”ë“œë¥¼ í†µí•œ ì°¸ê°€ì ì…ì¥
  - ì°¸ê°€ì ìƒíƒœ ê´€ë¦¬ (í´ë§ ê¸°ë°˜)
- **ìºë¦­í„° & í”„ë¡œí•„ ì„¤ì •**:
  - MBTI 16ê°€ì§€ ì¤‘ ì„ íƒ
  - ë™ë¬¼ ìºë¦­í„° ì„ íƒ (ìµëª…ì„± ë³´ì¥)
  - ê°„ë‹¨í•œ ë‹‰ë„¤ì„ ì„¤ì •
- **ë¼ìš´ë“œ ê¸°ë°˜ ê²Œì„ ì§„í–‰**:
  - ì„¤ì •ëœ ë¼ìš´ë“œ ìˆ˜ë§Œí¼ ìë™ ì§„í–‰
  - ê° ë¼ìš´ë“œë§ˆë‹¤ ë¯¸ë¦¬ ì •ì˜ëœ ì§ˆë¬¸ ì œì‹œ
  - 3ë¶„ê°„ ììœ ì‹œê°„ í›„ 1ë¶„ê°„ ì§€ëª© íƒ€ì„
- **ì§€ëª© & ë©”ì‹œì§• ì‹œìŠ¤í…œ**:
  - ì§ˆë¬¸ì— í•´ë‹¹í•˜ëŠ” ì°¸ê°€ì ì§€ëª©
  - ì§€ëª©ê³¼ í•¨ê»˜ ê°„ë‹¨í•œ ë©”ì‹œì§€ ì‘ì„±
  - ë™ë¬¼ ìºë¦­í„°ë¡œ ìµëª… ì „ë‹¬
- **ë§¤ì¹­ ì´ë²¤íŠ¸**:
  - ìƒí˜¸ ì§€ëª© ì‹œ íŒ¡íŒŒë ˆ íš¨ê³¼
  - ë§¤ì¹­ ì•Œë¦¼ ë° 5ë¶„ ì•„ì´ìŠ¤í¬ë¦¼ ì‚°ì±… íƒ€ì„ ì•ˆë‚´
  - ë§¤ì¹­ íˆìŠ¤í† ë¦¬ ê´€ë¦¬

## 3. IA (í˜ì´ì§€ êµ¬ì¡°ë„)

```
ğŸ“± ì•±
â”œâ”€â”€ ğŸ  í™ˆ (ê²Œì„ ì‹œì‘/ì°¸ì—¬)
â”œâ”€â”€ ğŸ® í†µí•© ê²Œì„ë°© (/room/[code])
â”‚   â”œâ”€â”€ ğŸ‘¥ ì°¸ê°€ì ëŒ€ê¸°ì‹¤ (ìƒíƒœ: waiting)
â”‚   â”œâ”€â”€ â° ììœ ì‹œê°„ (ìƒíƒœ: free_time)
â”‚   â”œâ”€â”€ ğŸ¯ ì§€ëª© í™”ë©´ (ìƒíƒœ: selection_time)
â”‚   â”‚   â”œâ”€â”€ â“ ì§ˆë¬¸ í‘œì‹œ
â”‚   â”‚   â”œâ”€â”€ ğŸ‘† ì°¸ê°€ì ì§€ëª©
â”‚   â”‚   â””â”€â”€ ğŸ’Œ ë©”ì‹œì§€ ì…ë ¥
â”‚   â”œâ”€â”€ ğŸ‰ ë¼ìš´ë“œ ê²°ê³¼ (ìƒíƒœ: round_result)
â”‚   â””â”€â”€ ğŸ“Š ìµœì¢… ê²°ê³¼ (ìƒíƒœ: finished)
â”œâ”€â”€ âš™ï¸ ì„¤ì •
â”‚   â”œâ”€â”€ ğŸ¦ ìºë¦­í„° ì„ íƒ
â”‚   â””â”€â”€ ğŸ§  MBTI ì„¤ì •
â””â”€â”€ ğŸ“‹ ê²Œì„ ì´ë ¥
```

### í˜ì´ì§€ êµ¬ì¡° íŠ¹ì§•

- **ë‹¨ì¼ ê²Œì„ë°© í˜ì´ì§€**: `/room/[code]`ì—ì„œ ê²Œì„ ìƒíƒœì— ë”°ë¼ ë‹¤ë¥¸ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°ê±´ë¶€ ë Œë”ë§
- **ìƒíƒœ ê¸°ë°˜ UI ì „í™˜**: URL ë³€ê²½ ì—†ì´ ê²Œì„ ìƒíƒœ(`waiting`, `free_time`, `selection_time`, `round_result`, `finished`)ì— ë”°ë¥¸ ì»´í¬ë„ŒíŠ¸ êµì²´
- **ì‹¤ì‹œê°„ ìƒíƒœ ë™ê¸°í™”**: í´ë§ì„ í†µí•œ ê²Œì„ ìƒíƒœ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¡œ ëª¨ë“  ì°¸ê°€ìê°€ ë™ì‹œì— ê°™ì€ í™”ë©´ ê²½í—˜
- **ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì„¤ê³„**: ê° ê²Œì„ ìƒíƒœë³„ë¡œ ë…ë¦½ì ì¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•˜ì—¬ ì¬ì‚¬ìš©ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

## 4. ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ë¶„ë¥˜

`src/domains/` ë””ë ‰í† ë¦¬ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬ì„±í•©ë‹ˆë‹¤.

### 4-1. ê° ë„ë©”ì¸ ì„¤ëª…

- **ê²Œì„ë°© (GameRoom)**: ê²Œì„ ì„¸ì…˜ ìƒì„±, ì°¸ê°€ì ê´€ë¦¬, ë¼ìš´ë“œ ì§„í–‰
- **ì°¸ê°€ì (Participant)**: ì°¸ê°€ì í”„ë¡œí•„, ìºë¦­í„°, MBTI ê´€ë¦¬
- **ë¼ìš´ë“œ (Round)**: ì§ˆë¬¸ ê´€ë¦¬, ì§€ëª© ì²˜ë¦¬, ì‹œê°„ ê´€ë¦¬
- **ë§¤ì¹­ (Matching)**: ì§€ëª© ê²°ê³¼ ë¶„ì„, ë§¤ì¹­ ì´ë²¤íŠ¸ ì²˜ë¦¬

### 4-2. ë„ë©”ì¸ì—ì„œ í¬í•¨í•˜ëŠ” ê¸°ëŠ¥ê³¼ ë§¤ìš° êµ¬ì²´ì ì¸ ìœ ì €í”Œë¡œìš°

#### ê¸°ëŠ¥1: ê²Œì„ë°© ìƒì„± ë° ì°¸ê°€

##### ê¸°ëŠ¥1ì˜ êµ¬ì²´ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**ë°© ìƒì„±ì (í˜¸ìŠ¤íŠ¸):**

1. ë‚¨ì„± ì°¸ê°€ì ìˆ˜ ì„ íƒ (2-8ëª…)
2. ì—¬ì„± ì°¸ê°€ì ìˆ˜ ì„ íƒ (2-8ëª…)
3. ì´ ë¼ìš´ë“œ ìˆ˜ ì„ íƒ (3-10ë¼ìš´ë“œ)
4. ë°© ìƒì„± ì‹œ 6ìë¦¬ ê³ ìœ  ì½”ë“œ ìƒì„±
5. ë°© ìƒíƒœë¥¼ 'ëŒ€ê¸°ì¤‘'ìœ¼ë¡œ ì„¤ì •
6. í˜¸ìŠ¤íŠ¸ë„ ì°¸ê°€ìë¡œ ê²Œì„ë°©ì— ì…ì¥

**ì°¸ê°€ì:**

1. ë°© ì½”ë“œ ì…ë ¥
2. ì„±ë³„ ì„ íƒ (ë‚¨/ì—¬)
3. í•´ë‹¹ ì„±ë³„ì˜ ì •ì›ì´ ì°¼ëŠ”ì§€ í™•ì¸
4. MBTI ì„ íƒ (16ê°€ì§€ ì¤‘ 1ê°œ)
5. ë™ë¬¼ ìºë¦­í„° ì„ íƒ (20ê°€ì§€ ì¤‘ 1ê°œ, ë°© ë‚´ì—ì„œ ì¤‘ë³µ ë¶ˆê°€)
6. ë‹‰ë„¤ì„ ì…ë ¥ (8ì ì´ë‚´)
7. ë°© ì…ì¥ í›„ ì°¸ê°€ì ëª©ë¡ ì—…ë°ì´íŠ¸ (ë‹¤ë¥¸ ì°¸ê°€ìë“¤ì€ ìƒˆë¡œê³ ì¹¨ ì‹œ í™•ì¸ ê°€ëŠ¥)

##### ê¸°ëŠ¥1ì˜ ìœ ì €í”Œë¡œìš°

```mermaid
graph TD
    A[ì•± ì‹œì‘] --> B{ì—­í•  ì„ íƒ}
    B -->|ë°© ë§Œë“¤ê¸°| C[ê²Œì„ ì„¤ì •]
    B -->|ë°© ì°¸ê°€í•˜ê¸°| D[ë°© ì½”ë“œ ì…ë ¥]

    C --> E[ë‚¨ì„± ì¸ì› ì„¤ì •]
    E --> F[ì—¬ì„± ì¸ì› ì„¤ì •]
    F --> G[ë¼ìš´ë“œ ìˆ˜ ì„¤ì •]
    G --> H[ë°© ìƒì„± ì™„ë£Œ]
    H --> I[ìºë¦­í„° ì„¤ì •]

    D --> J{ë°© ì¡´ì¬ ì—¬ë¶€}
    J -->|ì—†ìŒ| K[ì˜¤ë¥˜ ë©”ì‹œì§€]
    J -->|ìˆìŒ| L[ì„±ë³„ ì„ íƒ]
    L --> M{ì •ì› í™•ì¸}
    M -->|ê½‰ì°¸| N[ì…ì¥ ë¶ˆê°€ ì•Œë¦¼]
    M -->|ì…ì¥ ê°€ëŠ¥| I[ìºë¦­í„° ì„¤ì •]

    I --> O[MBTI ì„ íƒ]
    O --> P[ë™ë¬¼ ìºë¦­í„° ì„ íƒ]
    P --> Q[ë‹‰ë„¤ì„ ì…ë ¥]
    Q --> R[í†µí•© ê²Œì„ë°© ì…ì¥ (ìƒíƒœ: waiting)]
    R --> S{ëª¨ë“  ì¸ì› ì…ì¥?}
    S -->|ì•„ë‹ˆì˜¤| R
    S -->|ì˜ˆ| T[ê²Œì„ ì‹œì‘ (ìƒíƒœ: free_time)]
```

#### ê¸°ëŠ¥2: ë¼ìš´ë“œ ì§„í–‰ ë° ì§€ëª©

##### ê¸°ëŠ¥2ì˜ êµ¬ì²´ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**ììœ ì‹œê°„ (3ë¶„):**

1. í˜„ì¬ ë¼ìš´ë“œ ë²ˆí˜¸ì™€ ë‚¨ì€ ì‹œê°„ í‘œì‹œ
2. "ì˜¤í”„ë¼ì¸ì—ì„œ ììœ ë¡­ê²Œ ë†€ì•„ì£¼ì„¸ìš”!" ë©”ì‹œì§€
3. 3ë¶„ ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
4. 30ì´ˆ ì „ë¶€í„° ì¤€ë¹„ ì•Œë¦¼

**ì§€ëª© íƒ€ì„ (1ë¶„):**

1. í˜„ì¬ ë¼ìš´ë“œ ì§ˆë¬¸ì„ ì „ì²´ ì°¸ê°€ìì—ê²Œ í‘œì‹œ
2. ê° ì°¸ê°€ìëŠ” ì§ˆë¬¸ì— í•´ë‹¹í•˜ëŠ” ìƒëŒ€ë°© 1ëª… ì„ íƒ
3. ì„ íƒê³¼ í•¨ê»˜ ì§§ì€ ë©”ì‹œì§€ ì‘ì„± (50ì ì´ë‚´)
4. ì§€ëª© ì™„ë£Œ í›„ ë³¸ì¸ì˜ ì™„ë£Œ ìƒíƒœë§Œ í‘œì‹œ
5. 1ë¶„ íƒ€ì´ë¨¸ ì™„ë£Œ í›„ ëª¨ë“  ì„ íƒ ê²°ê³¼ë¥¼ ì¼ê´„ ì²˜ë¦¬

**ê²°ê³¼ ì²˜ë¦¬:**

1. ìƒí˜¸ ì§€ëª©ëœ ìŒ ì°¾ê¸°
2. ë§¤ì¹­ëœ ìŒì—ê²Œ íŒ¡íŒŒë ˆ íš¨ê³¼ì™€ í•¨ê»˜ ì•Œë¦¼
3. ë§¤ì¹­ë˜ì§€ ì•Šì€ ì°¸ê°€ìë“¤ì—ê²Œë„ ê²°ê³¼ í‘œì‹œ
4. 5ë¶„ ì•„ì´ìŠ¤í¬ë¦¼ ì‚°ì±… íƒ€ì„ ì•ˆë‚´
5. ë‹¤ìŒ ë¼ìš´ë“œê¹Œì§€ ëŒ€ê¸°

##### ê¸°ëŠ¥2ì˜ ìœ ì €í”Œë¡œìš° (ìƒíƒœ ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸ ì „í™˜)

```mermaid
graph TD
    A[ê²Œì„ ì‹œì‘] --> B[ìƒíƒœ: free_time]
    B --> C[ììœ ì‹œê°„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§]
    C --> D[30ì´ˆ ì „ ì•Œë¦¼]
    D --> E[ìƒíƒœ: selection_time]
    E --> F[ì§€ëª© ì»´í¬ë„ŒíŠ¸ ë Œë”ë§]
    F --> G[ì§ˆë¬¸ í‘œì‹œ]
    G --> H[ìƒëŒ€ë°© ì„ íƒ]
    H --> I[ë©”ì‹œì§€ ì‘ì„±]
    I --> J[ì§€ëª© ì™„ë£Œ]
    J --> K{ëª¨ë“  ì°¸ê°€ì ì™„ë£Œ?}
    K -->|ì•„ë‹ˆì˜¤| L[ëŒ€ê¸° ìƒíƒœ í‘œì‹œ]
    L --> K
    K -->|ì˜ˆ| M[ìƒíƒœ: round_result]
    M --> N[ê²°ê³¼ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§]
    N --> O{ë§¤ì¹­ ì—¬ë¶€}
    O -->|ë§¤ì¹­ë¨| P[íŒ¡íŒŒë ˆ + ì‚°ì±… ì•ˆë‚´]
    O -->|ë§¤ì¹­ ì•ˆë¨| Q[ë‹¤ìŒ ë¼ìš´ë“œ ì•ˆë‚´]
    P --> R{ë§ˆì§€ë§‰ ë¼ìš´ë“œ?}
    Q --> R
    R -->|ì•„ë‹ˆì˜¤| S[ë‹¤ìŒ ë¼ìš´ë“œ ìƒíƒœë¡œ]
    R -->|ì˜ˆ| T[ìƒíƒœ: finished]
    S --> B
    T --> U[ìµœì¢… ê²°ê³¼ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§]
```

#### ê¸°ëŠ¥3: ë§¤ì¹­ ì´ë²¤íŠ¸ ë° ê²°ê³¼ ê´€ë¦¬

##### ê¸°ëŠ¥3ì˜ êµ¬ì²´ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**ë§¤ì¹­ ê°ì§€:**

1. ê° ë¼ìš´ë“œ ì¢…ë£Œ ì‹œ ì§€ëª© ê²°ê³¼ ë¶„ì„
2. Aê°€ Bë¥¼ ì§€ëª©í•˜ê³ , Bë„ Aë¥¼ ì§€ëª©í•œ ê²½ìš° ë§¤ì¹­ ì„±ë¦½
3. ë§¤ì¹­ëœ ìŒì˜ ì •ë³´ë¥¼ ê²Œì„ ì„¸ì…˜ì— ì €ì¥

**ë§¤ì¹­ ì´ë²¤íŠ¸:**

1. ë§¤ì¹­ëœ ë‘ ì‚¬ëŒì—ê²Œ íŠ¹ë³„í•œ íŒ¡íŒŒë ˆ ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ
2. "ğŸ’• {ë™ë¬¼ìºë¦­í„°1}ê³¼ {ë™ë¬¼ìºë¦­í„°2}ê°€ ë§¤ì¹­ë˜ì—ˆìŠµë‹ˆë‹¤!"
3. "5ë¶„ê°„ ì•„ì´ìŠ¤í¬ë¦¼ ì‚°ì±…ì„ ë‹¤ë…€ì˜¤ì„¸ìš”!" ë©”ì‹œì§€
4. ë‹¤ë¥¸ ì°¸ê°€ìë“¤ì—ê²Œë„ ë§¤ì¹­ ì†Œì‹ ê³µìœ  (ìµëª… ìœ ì§€)

**ê²Œì„ ì¢…ë£Œ í›„ ê²°ê³¼:**

1. ì „ì²´ ë¼ìš´ë“œì—ì„œ ë§¤ì¹­ëœ íšŸìˆ˜ í‘œì‹œ
2. ê°€ì¥ ë§ì´ ì§€ëª©ë°›ì€ ì°¸ê°€ì (ì¸ê¸°ì™•/ì¸ê¸°í€¸)
3. ê°€ì¥ ë§ì´ ë§¤ì¹­ëœ ì°¸ê°€ì
4. ì°¸ê°€ìë³„ ë§¤ì¹­ íˆìŠ¤í† ë¦¬ ìš”ì•½

##### ê¸°ëŠ¥3ì˜ ìœ ì €í”Œë¡œìš°

```mermaid
graph TD
    A[ì§€ëª© ê²°ê³¼ ìˆ˜ì§‘] --> B[ë§¤ì¹­ ë¶„ì„]
    B --> C{ë§¤ì¹­ëœ ìŒ ìˆìŒ?}
    C -->|ì—†ìŒ| D[ì¼ë°˜ ê²°ê³¼ í™”ë©´]
    C -->|ìˆìŒ| E[ë§¤ì¹­ ìŒ ì‹ë³„]
    E --> F[íŒ¡íŒŒë ˆ ì• ë‹ˆë©”ì´ì…˜]
    F --> G[ë§¤ì¹­ ì•Œë¦¼ í‘œì‹œ]
    G --> H[ì‚°ì±… ì•ˆë‚´ ë©”ì‹œì§€]
    H --> I[ì „ì²´ ì°¸ê°€ìì—ê²Œ ê³µì§€]
    I --> J{ë§ˆì§€ë§‰ ë¼ìš´ë“œ?}
    D --> J
    J -->|ì•„ë‹ˆì˜¤| K[ë‹¤ìŒ ë¼ìš´ë“œ ëŒ€ê¸°]
    J -->|ì˜ˆ| L[ìµœì¢… ê²°ê³¼ í™”ë©´]
    L --> M[ë§¤ì¹­ í†µê³„ í‘œì‹œ]
    M --> N[ì¸ê¸°ì™•/í€¸ ë°œí‘œ]
    N --> O[ê²Œì„ ì¢…ë£Œ]
```

#### ê¸°ëŠ¥4: ì°¸ê°€ì ì´íƒˆ ë° ì¬ì°¸ì—¬ ê´€ë¦¬

##### ê¸°ëŠ¥4ì˜ êµ¬ì²´ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**ì°¸ê°€ì ì´íƒˆ ì²˜ë¦¬:**

1. ë‚˜ê°€ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ì„ íƒ ëª¨ë‹¬ í‘œì‹œ: "ì™„ì „íˆ ë‚˜ê°€ê¸°" vs "ì ì‹œ ë‚˜ê°€ê¸°"
2. "ì™„ì „íˆ ë‚˜ê°€ê¸°" ì„ íƒ ì‹œ:
   - ì°¸ê°€ì ìƒíƒœë¥¼ 'left'ë¡œ ë³€ê²½
   - ë‹¤ë¥¸ ì°¸ê°€ìë“¤ì˜ ì„ íƒ ëª©ë¡ì—ì„œ ì œê±°
   - í•´ë‹¹ ì°¸ê°€ìëŠ” ì¬ì…ì¥ ë¶ˆê°€
3. "ì ì‹œ ë‚˜ê°€ê¸°" ì„ íƒ ì‹œ:
   - ì°¸ê°€ì ìƒíƒœë¥¼ 'temporarily_away'ë¡œ ë³€ê²½
   - ì„ íƒ ëª©ë¡ì—ëŠ” ìœ ì§€ë˜ì§€ë§Œ 'ì¼ì‹œì´íƒˆ' í‘œì‹œ
   - ë°© ì½”ë“œë¡œ ì–¸ì œë“ ì§€ ì¬ì…ì¥ ê°€ëŠ¥

**í˜¸ìŠ¤íŠ¸ ë³€ê²½:**

1. í˜¸ìŠ¤íŠ¸ê°€ "ì™„ì „íˆ ë‚˜ê°€ê¸°" ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì°¸ê°€ìì—ê²Œ í˜¸ìŠ¤íŠ¸ ê¶Œí•œ ì´ì–‘
2. í˜¸ìŠ¤íŠ¸ ìš°ì„ ìˆœìœ„: ì…ì¥ ìˆœì„œê°€ ë¹ ë¥¸ ì°¸ê°€ì ìˆœ
3. ìƒˆ í˜¸ìŠ¤íŠ¸ì—ê²Œ í˜¸ìŠ¤íŠ¸ ë³€ê²½ ì•Œë¦¼

**ì¬ì°¸ì—¬ ì²˜ë¦¬:**

1. 'temporarily_away' ìƒíƒœ ì°¸ê°€ìëŠ” ë°© ì½”ë“œë¡œ ì¬ì…ì¥ ê°€ëŠ¥
2. í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ë¼ìš´ë“œ ìƒí™©ì— ë”°ë¥¸ ì²˜ë¦¬:
   - ììœ ì‹œê°„ ì¤‘: ì¦‰ì‹œ ì°¸ì—¬ ê°€ëŠ¥
   - ì§€ëª©ì‹œê°„ ì¤‘: í•´ë‹¹ ë¼ìš´ë“œëŠ” ì°¸ì—¬ ë¶ˆê°€, ë‹¤ìŒ ë¼ìš´ë“œë¶€í„° ì°¸ì—¬
3. ì¬ì…ì¥ ì‹œ ë‹¤ë¥¸ ì°¸ê°€ìë“¤ì—ê²Œ ë³µê·€ ì•Œë¦¼

**ì„ íƒ ì‹œê°„ ê´€ë¦¬:**

1. ì§€ëª© íƒ€ì„ ì‹œì‘ ì‹œ 1ë¶„ ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
2. ì„ íƒí•˜ì§€ ì•Šê³  ì‹œê°„ ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ "ì„ íƒ ì•ˆí•¨"ìœ¼ë¡œ ì²˜ë¦¬
3. 1ë¶„ íƒ€ì´ë¨¸ ì™„ë£Œ í›„ ëª¨ë“  ì„ íƒ ê²°ê³¼ë¥¼ ì¼ê´„ ì²˜ë¦¬

##### ê¸°ëŠ¥4ì˜ ìœ ì €í”Œë¡œìš°

```mermaid
graph TD
    A[ì°¸ê°€ìê°€ ë‚˜ê°€ê¸° ë²„íŠ¼ í´ë¦­] --> B[ì´íƒˆ ìœ í˜• ì„ íƒ ëª¨ë‹¬]
    B --> C{ì™„ì „íˆ ë‚˜ê°€ê¸° ì„ íƒ?}
    C -->|ì˜ˆ| D[ì°¸ê°€ì ìƒíƒœ 'left'ë¡œ ë³€ê²½]
    C -->|ì•„ë‹ˆì˜¤| E[ì°¸ê°€ì ìƒíƒœ 'temporarily_away'ë¡œ ë³€ê²½]
    D --> F[ì„ íƒ ëª©ë¡ì—ì„œ ì œê±°]
    E --> G[ì„ íƒ ëª©ë¡ì— 'ì¼ì‹œì´íƒˆ' í‘œì‹œ]
    F --> H{í˜¸ìŠ¤íŠ¸ì˜€ë‚˜?}
    G --> H
    H -->|ì˜ˆ| I[ë‹¤ìŒ ì°¸ê°€ìì—ê²Œ í˜¸ìŠ¤íŠ¸ ê¶Œí•œ ì´ì–‘]
    H -->|ì•„ë‹ˆì˜¤| J[ê²Œì„ ê³„ì† ì§„í–‰]
    I --> J

    K[ì¼ì‹œì´íƒˆ ì°¸ê°€ì ì¬ì…ì¥] --> L{í˜„ì¬ ê²Œì„ ìƒíƒœ}
    L -->|ììœ ì‹œê°„| M[ì¦‰ì‹œ ì°¸ì—¬ ê°€ëŠ¥]
    L -->|ì§€ëª©ì‹œê°„| N[ë‹¤ìŒ ë¼ìš´ë“œë¶€í„° ì°¸ì—¬]
    M --> O[ë³µê·€ ì•Œë¦¼]
    N --> O
```

#### ê¸°ëŠ¥5: ì§ˆë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ

##### ê¸°ëŠ¥5ì˜ êµ¬ì²´ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**ì§ˆë¬¸ ë¶„ë¥˜ ë° ë°°ì¹˜:**

1. ì´ 100ê°œì˜ ì§ˆë¬¸ì„ ë¯¸ë¦¬ ì¤€ë¹„
2. ì§ˆë¬¸ì„ 3ê°œ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜:
   - ì´ˆë°˜ (1-3ë¼ìš´ë“œ): ê°€ë²¼ìš´ ì•„ì´ìŠ¤ë¸Œë ˆì´í‚¹ ì§ˆë¬¸
   - ì¤‘ë°˜ (4-7ë¼ìš´ë“œ): í¥ë¯¸ë¡­ê³  ì¬ë¯¸ìˆëŠ” ì§ˆë¬¸
   - í›„ë°˜ (8-10ë¼ìš´ë“œ): ì¡°ê¸ˆ ë” ê¹Šì´ ìˆëŠ” ì§ˆë¬¸
3. ê° ë¼ìš´ë“œë§ˆë‹¤ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì—ì„œ ëœë¤ìœ¼ë¡œ ì§ˆë¬¸ ì„ íƒ
4. í•œ ê²Œì„ ë‚´ì—ì„œ ê°™ì€ ì§ˆë¬¸ ì¤‘ë³µ ë°©ì§€

**ì„ íƒ ìŠ¤í‚µ ê¸°ëŠ¥:**

1. ì§€ëª© í™”ë©´ì—ì„œ "ì´ë²ˆ ë¼ìš´ë“œ íŒ¨ìŠ¤" ë²„íŠ¼ ì œê³µ
2. íŒ¨ìŠ¤ ì„ íƒ ì‹œ í•´ë‹¹ ë¼ìš´ë“œì—ì„œ ì§€ëª©í•˜ì§€ ì•ŠìŒ
3. íŒ¨ìŠ¤í•œ ì°¸ê°€ìë„ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ì§€ëª©í•  ìˆ˜ ìˆìŒ
4. ê²°ê³¼ í™”ë©´ì—ì„œ íŒ¨ìŠ¤í•œ ì°¸ê°€ì ìˆ˜ í‘œì‹œ

##### ê¸°ëŠ¥5ì˜ ìœ ì €í”Œë¡œìš°

```mermaid
graph TD
    A[ë¼ìš´ë“œ ì‹œì‘] --> B{ë¼ìš´ë“œ ë²ˆí˜¸ í™•ì¸}
    B -->|1-3ë¼ìš´ë“œ| C[ì´ˆë°˜ ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬]
    B -->|4-7ë¼ìš´ë“œ| D[ì¤‘ë°˜ ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬]
    B -->|8-10ë¼ìš´ë“œ| E[í›„ë°˜ ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬]
    C --> F[í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì—ì„œ ëœë¤ ì„ íƒ]
    D --> F
    E --> F
    F --> G[ì§ˆë¬¸ í‘œì‹œ]
    G --> H[ì§€ëª© í™”ë©´]
    H --> I{ì°¸ê°€ì ì„ íƒ}
    I -->|ì§€ëª©í•˜ê¸°| J[ìƒëŒ€ë°© ì„ íƒ]
    I -->|íŒ¨ìŠ¤í•˜ê¸°| K[ì´ë²ˆ ë¼ìš´ë“œ íŒ¨ìŠ¤]
    J --> L[ì§€ëª© ì™„ë£Œ]
    K --> L
```

## 5. ì‹œìŠ¤í…œ ì„¤ê³„ (System Design)

```mermaid
graph TB
    subgraph "Frontend (Next.js)"
        A[ìƒíƒœë³„ React Components]
        B[Polling Hooks]
        C[React Context State Management]
        D[Game State Provider]
    end

    subgraph "Backend (Next.js Server Actions)"
        E[Game Room Actions]
        F[Participant Actions]
        G[Round Actions]
        H[Polling Actions]
    end

    subgraph "Database (Supabase)"
        I[PostgreSQL with RLS]
        J[Real-time State Tables]
    end

    subgraph "External Services"
        K[Character Assets]
    end

    A --> E
    B --> H
    C --> D
    D --> F
    D --> G
    E --> I
    F --> I
    G --> I
    H --> J
```

### ì•„í‚¤í…ì²˜ íŠ¹ì§•

- **í´ë§ ê¸°ë°˜ ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ**: WebSocket ëŒ€ì‹  íš¨ìœ¨ì ì¸ í´ë§ìœ¼ë¡œ ì‹¤ì‹œê°„ ìƒíƒœ ë™ê¸°í™”
- **Server Actions**: REST API ëŒ€ì‹  Next.js Server Actionsë¡œ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ í†µì‹  ê°„ì†Œí™”
- **ìƒíƒœ ì¤‘ì‹¬ ì„¤ê³„**: ê²Œì„ ìƒíƒœë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ì»´í¬ë„ŒíŠ¸ ì¡°ê±´ë¶€ ë Œë”ë§
- **RLS ë³´ì•ˆ**: Supabase Row Level Securityë¡œ ë°ì´í„° ì ‘ê·¼ ê¶Œí•œ ê´€ë¦¬

## 6. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (DB Schema)

```mermaid
erDiagram
    game_rooms {
        string id PK
        string code "6ìë¦¬ ë°© ì½”ë“œ"
        int male_capacity "ë‚¨ì„± ì •ì›"
        int female_capacity "ì—¬ì„± ì •ì›"
        int total_rounds "ì´ ë¼ìš´ë“œ ìˆ˜"
        int current_round "í˜„ì¬ ë¼ìš´ë“œ"
        string status "waiting/playing/finished"
        timestamp created_at
        string host_id FK
    }

    participants {
        string id PK
        string room_id FK
        string nickname "ë‹‰ë„¤ì„"
        string gender "male/female"
        string mbti "MBTI ìœ í˜•"
        string character "ë™ë¬¼ ìºë¦­í„°"
        boolean is_host "í˜¸ìŠ¤íŠ¸ ì—¬ë¶€"
        string status "active/temporarily_away/left"
        int join_order "ì…ì¥ ìˆœì„œ"
        timestamp joined_at
        timestamp last_seen
    }

    questions {
        string id PK
        string content "ì§ˆë¬¸ ë‚´ìš©"
        string category "ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬"
        int order "ì§ˆë¬¸ ìˆœì„œ"
    }

    rounds {
        string id PK
        string room_id FK
        int round_number "ë¼ìš´ë“œ ë²ˆí˜¸"
        string question_id FK
        string status "waiting/active/completed"
        timestamp started_at
        timestamp ended_at
    }

    selections {
        string id PK
        string round_id FK
        string selector_id FK "ì§€ëª©í•œ ì‚¬ëŒ"
        string selected_id FK "ì§€ëª©ë°›ì€ ì‚¬ëŒ"
        string message "í•¨ê»˜ ë³´ë‚¸ ë©”ì‹œì§€"
        timestamp created_at
    }

    matches {
        string id PK
        string round_id FK
        string participant1_id FK
        string participant2_id FK
        timestamp matched_at
    }

    game_rooms ||--o{ participants : "has many"
    game_rooms ||--o{ rounds : "has many"
    participants ||--o{ selections : "selector"
    participants ||--o{ selections : "selected"
    questions ||--o{ rounds : "used in"
    rounds ||--o{ selections : "contains"
    rounds ||--o{ matches : "creates"
    participants ||--o{ matches : "participant1"
    participants ||--o{ matches : "participant2"
```

## 7. í–¥í›„ ê°œë°œ ë¡œë“œë§µ

### Phase 1: MVP (ìµœì†Œ ê¸°ëŠ¥ ì œí’ˆ) - 1-2ê°œì›”

- âœ… ê¸°ë³¸ ê²Œì„ë°© ìƒì„± ë° ì°¸ê°€
- âœ… ë¼ìš´ë“œ ê¸°ë°˜ ê²Œì„ ì§„í–‰
- âœ… ì§€ëª© ë° ë§¤ì¹­ ì‹œìŠ¤í…œ
- âœ… ì°¸ê°€ì ì´íƒˆ/ì¬ì°¸ì—¬ ê´€ë¦¬
- âœ… ì§ˆë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ

### Phase 2: ì‚¬ìš©ì ê²½í—˜ ê°œì„  - 1ê°œì›”

- ğŸ”„ **ë§¤ì¹­ ê²©ë ¤ ì‹œìŠ¤í…œ**: ê³„ì† ë§¤ì¹­ì´ ì•ˆ ë˜ëŠ” ì°¸ê°€ìë¥¼ ìœ„í•œ íŠ¹ë³„í•œ ì´ë²¤íŠ¸ë‚˜ ì¬ë¯¸ ìš”ì†Œ
- ğŸ”„ **SNS ê³µìœ  ê¸°ëŠ¥**: ë§¤ì¹­ ê²°ê³¼ë‚˜ ê²Œì„ í†µê³„ë¥¼ ì†Œì…œë¯¸ë””ì–´ì— ê³µìœ 
- ğŸ”„ **ììœ ì‹œê°„ ë¯¸ë‹ˆê²Œì„**: 3ë¶„ ëŒ€ê¸°ì‹œê°„ ë™ì•ˆ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ ì•„ì´ìŠ¤ë¸Œë ˆì´í‚¹ ê²Œì„
- ğŸ”„ **ì»¤ìŠ¤í…€ ì§ˆë¬¸**: ì‚¬ìš©ìê°€ ì§ì ‘ ì§ˆë¬¸ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ - 1-2ê°œì›”

- ğŸ”„ **ê²Œì„ í…Œë§ˆ ì„ íƒ**: ë‹¤ì–‘í•œ ê²Œì„ ëª¨ë“œ (ì—°ì• , ì¹œëª©, ë¹„ì¦ˆë‹ˆìŠ¤ ë„¤íŠ¸ì›Œí‚¹ ë“±)
- ğŸ”„ **AI ê¸°ë°˜ ë§¤ì¹­ ì¶”ì²œ**: ì´ì „ ë¼ìš´ë“œ ê²°ê³¼ë¥¼ ë¶„ì„í•˜ì—¬ ë§¤ì¹­ ê°€ëŠ¥ì„±ì´ ë†’ì€ ì¡°í•© íŒíŠ¸ ì œê³µ
- ğŸ”„ **ê²Œì„ ê¸°ë¡ ë° í†µê³„**: ê°œì¸ë³„ ê²Œì„ íˆìŠ¤í† ë¦¬, ë§¤ì¹­ ì„±ê³µë¥  ë“± ìƒì„¸ í†µê³„
- ğŸ”„ **ì˜¤í”„ë¼ì¸ ì´ë²¤íŠ¸ ì—°ë™**: ì‹¤ì œ ë§¤ì¹­ í›„ ì¶”ì²œ ì¥ì†Œë‚˜ í™œë™ ì œì•ˆ

### Phase 4: ì»¤ë®¤ë‹ˆí‹° ë° í™•ì¥ - 2ê°œì›”

- ğŸ”„ **ë§¤ì¹­ í›„ í›„ì† ì†Œí†µ**: ë§¤ì¹­ëœ ì‚¬ìš©ìë“¤ë§Œì˜ ë³„ë„ ì±„íŒ…ë°©
- ğŸ”„ **ê·¸ë£¹ ë§¤ì¹­**: 2:2, 3:3 ë“± ê·¸ë£¹ ë‹¨ìœ„ ë§¤ì¹­ ì‹œìŠ¤í…œ
- ğŸ”„ **ì´ë²¤íŠ¸ ìº˜ë¦°ë”**: ì •ê¸° ëª¨ì„ì´ë‚˜ íŠ¹ë³„ ì´ë²¤íŠ¸ ê´€ë¦¬
- ğŸ”„ **ê´€ë¦¬ì ë„êµ¬**: í˜¸ìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê³ ê¸‰ ê´€ë¦¬ ê¸°ëŠ¥

## 8. ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­

### ì„±ëŠ¥ ìµœì í™”

- í´ë§ ê¸°ë°˜ ì‹¤ì‹œê°„ ìƒíƒœ ë™ê¸°í™” (íš¨ìœ¨ì ì¸ í´ë§ ê°„ê²© ê´€ë¦¬)
- í˜ì´ì§€ ê°€ì‹œì„± ê°ì§€ë¥¼ í†µí•œ í´ë§ ìµœì í™”
- ëŒ€ìš©ëŸ‰ ë™ì‹œ ì ‘ì†ì ì²˜ë¦¬ (ì„œë²„ ì•¡ì…˜ ê¸°ë°˜)
- ëª¨ë°”ì¼ í™˜ê²½ ìµœì í™” ë° ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ëŒ€ì‘

### ë³´ì•ˆ ë° ê°œì¸ì •ë³´

- ìµëª…ì„± ë³´ì¥ ë©”ì»¤ë‹ˆì¦˜
- ê°œì¸ì •ë³´ ìµœì†Œ ìˆ˜ì§‘ ì›ì¹™
- ê²Œì„ ì¢…ë£Œ ì‹œ ë°ì´í„° ìë™ ì‚­ì œ ì˜µì…˜
- Supabase RLS ê¸°ë°˜ ë°ì´í„° ì ‘ê·¼ ì œì–´

### í™•ì¥ì„±

- ìƒíƒœ ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- ë‹¤êµ­ì–´ ì§€ì› ì¤€ë¹„
- ë‹¤ì–‘í•œ í”Œë«í¼ (ì›¹, ëª¨ë°”ì¼ ì•±) ì§€ì›
- í´ë§ ì‹œìŠ¤í…œì˜ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜
